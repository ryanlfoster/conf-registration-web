function printStackTrace(a){var a=a||{guess:!0},b=a.e||null,a=!!a.guess,c=new printStackTrace.implementation,b=c.run(b);return a?c.guessFunctions(b):b}var Hoptoad={VERSION:"0.1.0",NOTICE_XML:'<?xml version="1.0" encoding="UTF-8"?><notice version="2.0"><api-key></api-key><notifier><name>airbrake_js</name><version>0.1.0</version><url>http://airbrake.io</url></notifier><error><class>EXCEPTION_CLASS</class><message>EXCEPTION_MESSAGE</message><backtrace>BACKTRACE_LINES</backtrace></error><request><url>REQUEST_URL</url><component>REQUEST_COMPONENT</component><action>REQUEST_ACTION</action></request><server-environment><project-root>PROJECT_ROOT</project-root><environment-name>production</environment-name></server-environment></notice>',ROOT:window.location.protocol+"//"+window.location.host,BACKTRACE_MATCHER:/^(.*)\@(.*)\:(\d+)$/,backtrace_filters:[/notifier\.js/],notify:function(error){var xml=escape(Hoptoad.generateXML(error)),host=Hoptoad.host||"airbrake.io",url="//"+host+"/notifier_api/v2/notices?data="+xml,request=document.createElement("iframe");request.style.width="1px",request.style.height="1px",request.style.display="none",request.src=url,document.getElementsByTagName("head")[0].appendChild(request)},setEnvironment:function(value){var matcher=/<environment-name>.*<\/environment-name>/;Hoptoad.NOTICE_XML=Hoptoad.NOTICE_XML.replace(matcher,"<environment-name>"+value+"</environment-name>")},setHost:function(value){Hoptoad.host=value},setKey:function(value){var matcher=/<api-key>.*<\/api-key>/;Hoptoad.NOTICE_XML=Hoptoad.NOTICE_XML.replace(matcher,"<api-key>"+value+"</api-key>")},setErrorDefaults:function(value){Hoptoad.errorDefaults=value},generateXML:function(errorWithoutDefaults){var error=Hoptoad.mergeDefault(Hoptoad.errorDefaults,errorWithoutDefaults),xml=Hoptoad.NOTICE_XML,baseUrl=error.url||"",hash=location.hash||"",url=Hoptoad.escapeText(baseUrl+hash||""),component=Hoptoad.escapeText(error.component||""),action=Hoptoad.escapeText(error.action||""),errorType=Hoptoad.escapeText(error.type||"Error"),message=Hoptoad.escapeText(error.message||"Unknown error."),backtrace=Hoptoad.generateBacktrace(error);if(""==Hoptoad.trim(url)&&""==Hoptoad.trim(component))xml=xml.replace(/<request>.*<\/request>/,"");else{var data="",cgi_data=error["cgi-data"]||{};cgi_data.HTTP_USER_AGENT=navigator.userAgent,data+="<cgi-data>",data+=Hoptoad.generateVariables(cgi_data),data+="</cgi-data>";for(var methods=["params","session"],i=0;2>i;i++){var type=methods[i];error[type]&&(data+="<"+type+">",data+=Hoptoad.generateVariables(error[type]),data+="</"+type+">")}xml=xml.replace("</request>",data+"</request>").replace("REQUEST_URL",url).replace("REQUEST_ACTION",action).replace("REQUEST_COMPONENT",component)}return xml.replace("PROJECT_ROOT",Hoptoad.ROOT).replace("EXCEPTION_CLASS",errorType).replace("EXCEPTION_MESSAGE",message).replace("BACKTRACE_LINES",backtrace.join(""))},generateBacktrace:function(error){if(error=error||{},"string"!=typeof error.stack)try{0()}catch(e){error.stack=e.stack}for(var backtrace=[],stacktrace=Hoptoad.getStackTrace(error),i=0,l=stacktrace.length;l>i;i++){var line=stacktrace[i],matches=line.match(Hoptoad.BACKTRACE_MATCHER);if(matches&&Hoptoad.validBacktraceLine(line)){var file=matches[2].replace(Hoptoad.ROOT,"[PROJECT_ROOT]");0==i&&matches[2].match(document.location.href)&&backtrace.push('<line method="" file="internal: " number=""/>'),backtrace.push('<line method="'+Hoptoad.escapeText(matches[1])+'" file="'+Hoptoad.escapeText(file)+'" number="'+matches[3]+'" />')}}return backtrace},getStackTrace:function(error){for(var stacktrace=printStackTrace({e:error,guess:!1}),i=0,l=stacktrace.length;l>i;i++)stacktrace[i].match(/\:\d+$/)||(-1==stacktrace[i].indexOf("@")&&(stacktrace[i]+="@unsupported.js"),stacktrace[i]+=":0");return stacktrace},validBacktraceLine:function(line){for(var i=0;i<Hoptoad.backtrace_filters.length;i++)if(line.match(Hoptoad.backtrace_filters[i]))return!1;return!0},generateVariables:function(parameters){var key,result="";for(key in parameters)result+='<var key="'+Hoptoad.escapeText(key)+'">'+Hoptoad.escapeText(parameters[key])+"</var>";return result},escapeText:function(text){return text.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/'/g,"&#39;").replace(/"/g,"&#34;")},trim:function(text){return text.toString().replace(/^\s+/,"").replace(/\s+$/,"")},mergeDefault:function(defaults,hash){var key,cloned={};for(key in hash)cloned[key]=hash[key];for(key in defaults)cloned.hasOwnProperty(key)||(cloned[key]=defaults[key]);return cloned}};printStackTrace.implementation=function(){},printStackTrace.implementation.prototype={run:function(a){var a=a||this.createException(),b=this.mode(a);return"other"===b?this.other(arguments.callee):this[b](a)},createException:function(){try{return this.undef(),null}catch(a){return a}},mode:function(a){return this._mode=a.arguments&&a.stack?"chrome":"undefined"!=typeof window&&window.opera?a.stacktrace?"opera10":"opera":a.stack?"firefox":"other"},instrumentFunction:function(a,b,c){a=a||window,a["_old"+b]=a[b],a[b]=function(){return c.call(this,printStackTrace()),a["_old"+b].apply(this,arguments)},a[b]._instrumented=!0},deinstrumentFunction:function(a,b){a[b].constructor===Function&&a[b]._instrumented&&a["_old"+b].constructor===Function&&(a[b]=a["_old"+b])},chrome:function(a){return a.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@").split("\n")},firefox:function(a){return a.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^\(/gm,"{anonymous}(").split("\n")},opera10:function(a){var c,d,e,a=a.stacktrace.split("\n"),b=/.*line (\d+), column (\d+) in ((<anonymous function\:?\s*(\S+))|([^\(]+)\([^\)]*\))(?: in )?(.*)\s*$/i;for(c=2,d=0,e=a.length;e-2>c;c++)if(b.test(a[c])){var g=RegExp.$6+":"+RegExp.$1+":"+RegExp.$2,f=RegExp.$3,f=f.replace(/<anonymous function\:?\s?(\S+)?>/g,"{anonymous}");a[d++]=f+"@"+g}return a.splice(d,a.length-d),a},opera:function(a){var c,d,e,a=a.message.split("\n"),b=/Line\s+(\d+).*script\s+(http\S+)(?:.*in\s+function\s+(\S+))?/i;for(c=4,d=0,e=a.length;e>c;c+=2)b.test(a[c])&&(a[d++]=(RegExp.$3?RegExp.$3+"()@"+RegExp.$2+RegExp.$1:"{anonymous}()@"+RegExp.$2+":"+RegExp.$1)+" -- "+a[c+1].replace(/^\s+/,""));return a.splice(d,a.length-d),a},other:function(a){for(var d,e,b=/function\s*([\w\-$]+)?\s*\(/i,c=[];a&&c.length<10;)d=b.test(a.toString())?RegExp.$1||"{anonymous}":"{anonymous}",e=Array.prototype.slice.call(a.arguments||[]),c[c.length]=d+"("+this.stringifyArguments(e)+")",a=a.caller;return c},stringifyArguments:function(a){for(var b=0;b<a.length;++b){var c=a[b];void 0===c?a[b]="undefined":null===c?a[b]="null":c.constructor&&(c.constructor===Array?a[b]=c.length<3?"["+this.stringifyArguments(c)+"]":"["+this.stringifyArguments(Array.prototype.slice.call(c,0,1))+"..."+this.stringifyArguments(Array.prototype.slice.call(c,-1))+"]":c.constructor===Object?a[b]="#object":c.constructor===Function?a[b]="#function":c.constructor===String&&(a[b]='"'+c+'"'))}return a.join(",")},sourceCache:{},ajax:function(a){var b=this.createXMLHTTPObject();return b?(b.open("GET",a,!1),b.setRequestHeader("User-Agent","XMLHTTP/1.0"),b.send(""),b.responseText):void 0},createXMLHTTPObject:function(){for(var a,b=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=0;c<b.length;c++)try{return a=b[c](),this.createXMLHTTPObject=b[c],a}catch(d){}},isSameDomain:function(a){return-1!==a.indexOf(location.hostname)},getSource:function(a){return a in this.sourceCache||(this.sourceCache[a]=this.ajax(a).split("\n")),this.sourceCache[a]},guessFunctions:function(a){for(var b=0;b<a.length;++b){var c=a[b],d=/\{anonymous\}\(.*\)@(\w+:\/\/([\-\w\.]+)+(:\d+)?[^:]+):(\d+):?(\d+)?/.exec(c);if(d){var e=d[1],d=d[4];e&&this.isSameDomain(e)&&d&&(e=this.guessFunctionName(e,d),a[b]=c.replace("{anonymous}",e))}}return a},guessFunctionName:function(a,b){var c;try{c=this.guessFunctionNameFromLines(b,this.getSource(a))}catch(d){c="getSource failed with url: "+a+", exception: "+d.toString()}return c},guessFunctionNameFromLines:function(a,b){for(var c=/function ([^(]*)\(([^)]*)\)/,d=/['"]?([0-9A-Za-z_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,e="",g=0;10>g;++g)if(e=b[a-g]+e,void 0!==e){var f=d.exec(e);if(f&&f[1])return f[1];if((f=c.exec(e))&&f[1])return f[1]}return"(?)"}},window.onerror=function(message,file,line){return setTimeout(function(){Hoptoad.notify({message:message,stack:"()@"+file+":"+line})},100),!0},Hoptoad.setHost("errors.uscm.org"),Hoptoad.setKey("e7a93aafa70a5d3929679c5ad95bf8c7"),_.contains(location.hostname,"stage")&&Hoptoad.setEnvironment("stage"),angular.module("confRegistrationWebApp").config(function($provide){$provide.decorator("$exceptionHandler",["$delegate",function($delegate){return function(exception){if($delegate(exception),!_.contains(location.hostname,"localhost")){var error={type:"Angular",message:exception.message,params:{angularVersion:angular.version.full},component:exception.stack};Hoptoad.notify(error)}}}])});